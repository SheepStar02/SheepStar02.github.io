import{a as n,r as d,j as u,c as I,R as E}from"./index-552142d5.js";const B=({value:c,transition:S})=>{const h=()=>`${3.5-(Math.pow(2,c).toString().length-1)*.5}rem`,f=["rgb(205,193,180)","rgb(238,228,218)","rgb(237,224,200)","rgb(242,177,121)","rgb(245,149,99)","rgb(246,124,96)","rgb(246,94,59)","rgb(237,207,115)","rgb(237,204,98)","rgb(237,200,80)","rgb(237,197,63)","rgb(237,194,45)"];return n("div",{style:{backgroundColor:f[0]},children:n("div",{className:"w-24 h-24 bg-neutral-800 flex items-center justify-center font-bold",style:{backgroundColor:f[c]||"black",color:c<=2?"rgb(119,110,101)":"white",transform:S,transitionDuration:S===""?void 0:"0.1s",fontSize:h()},children:c===0?"":Math.pow(2,c)})})},M=()=>{const[h,f]=d.useState(!1),[p,m]=d.useState(0),[b,z]=d.useState(0);d.useState(!1),d.useEffect(()=>{m(parseInt(localStorage.getItem("score"))||0),z(parseInt(localStorage.getItem("best"))||0),g(JSON.parse(localStorage.getItem("board"))||o)},[]);const N=()=>{for(let a of o)for(let s of a)if(s.value===0)return!1;return localStorage.setItem("best",b),localStorage.setItem("score",0),localStorage.removeItem("board"),g(w()),m(0),!0},w=()=>{const a=new Array(4).fill(0).map(()=>new Array(4).fill(0).map(()=>({value:0,transition:""})));return v(a),v(a),a},y=a=>{if(h)return;const s=[...o],i=[];switch(a.code){case"KeyA":case"ArrowLeft":for(let t=0;t<4;t++){let r=0,l=0;for(let e=0;e<4;e++)o[t][e].value!==0&&(o[t][e].value===l?(r--,l=0):l=o[t][e].value,i.push({row:t,col:e,drow:t,dcol:r}),s[t][e].transition=`translateX(${-1*(e-r)*108}px)`,r++)}break;case"KeyD":case"ArrowRight":for(let t=0;t<4;t++){let r=3,l=0;for(let e=4-1;e>=0;e--)o[t][e].value!==0&&(o[t][e].value===l?(r++,l=0):l=o[t][e].value,i.push({row:t,col:e,drow:t,dcol:r}),s[t][e].transition=`translateX(${(r-e)*108}px)`,r--)}break;case"KeyW":case"ArrowUp":for(let t=0;t<4;t++){let r=0,l=0;for(let e=0;e<4;e++)o[e][t].value!==0&&(o[e][t].value===l?(r--,l=0):l=o[e][t].value,i.push({row:e,col:t,drow:r,dcol:t}),s[e][t].transition=`translateY(${-1*(e-r)*108}px)`,r++)}break;case"KeyS":case"ArrowDown":for(let t=0;t<4;t++){let r=3,l=0;for(let e=4-1;e>=0;e--)o[e][t].value!==0&&(o[e][t].value===l?(r++,l=0):l=o[e][t].value,i.push({row:e,col:t,drow:r,dcol:t}),s[e][t].transition=`translateY(${(r-e)*108}px)`,r--)}break;default:return}f(!0),g(s),setTimeout(()=>{const t=[...o];let r=!1,l=0;for(const e of i){if(e.row===e.drow&&e.col===e.dcol){t[e.row][e.col]={value:t[e.row][e.col].value,transition:""};continue}const x=t[e.row][e.col].value;x===t[e.drow][e.dcol].value&&(l+=Math.pow(2,x+1)),t[e.drow][e.dcol]={value:x===t[e.drow][e.dcol].value?x+1:x,transition:""},t[e.row][e.col]={value:0,transition:""},r=!0}A(p+l,t,r)},100)},A=(a,s,i)=>{m(a),z(Math.max(a,b)),g(s),f(!1),localStorage.setItem("score",a),localStorage.setItem("best",Math.max(a,b)),localStorage.setItem("board",JSON.stringify(s)),!N()&&(i&&(s=v([...o])),localStorage.setItem("board",JSON.stringify(s)))},v=a=>{do var s=Math.floor(Math.random()*4),i=Math.floor(Math.random()*4);while(a[s][i].value!==0);return a[s][i].value=Math.random()>.9?2:1,a},[o,g]=d.useState(w());return n("div",{className:"w-screen h-screen flex items-center justify-center",onKeyDown:y,tabIndex:"0",children:u("div",{className:"flex flex-col outline-none",children:[u("div",{className:"flex gap-2 justify-between items-center",children:[n("h1",{className:"text-8xl font-bold text-[#776E65] text-left h-min",children:"2048"}),u("div",{className:"flex flex-col items-end gap-2",children:[u("div",{className:"flex gap-2",children:[u("div",{className:"bg-[#BBADA0] px-5 rounded",children:[n("p",{className:"text-[#EEE4DA] font-bold text-xs mt-2 text-center",children:"SCORE"}),n("p",{className:"text-white font-bold text-2xl text-center",children:p})]}),u("div",{className:"bg-[#BBADA0] px-5 rounded",children:[n("p",{className:"text-[#EEE4DA] font-bold text-xs mt-2 text-center",children:"BEST"}),n("p",{className:"text-white font-bold text-2xl text-center",children:b})]})]}),n("button",{className:"p-1.5 bg-[#8F7A66] px-4 font-bold text-lg rounded text-white w-32 my-6",onClick:()=>{localStorage.removeItem("board"),localStorage.setItem("best",b),localStorage.setItem("score",0),g(w()),m(0)},children:"New Game"})]})]}),n("div",{className:"flex flex-col gap-3 bg-[#BBADA0] p-3 rounded-lg",children:o.map((a,s)=>n("div",{className:"flex gap-3",children:a.map((i,t)=>n(B,{value:i.value,transition:i.transition},t))},s))})]})})};function D(){return n("div",{className:"bg-[#FAF8EF] w-screen h-screen flex items-center justify-center",children:n(M,{})})}I.createRoot(document.getElementById("root")).render(n(E.StrictMode,{children:n(D,{})}));
