import{a as s,r as m,j as d,c as E,R as I}from"./index-552142d5.js";const B=({value:c,transition:h})=>{const p=()=>`${3.5-(Math.pow(2,c).toString().length-1)*.5}rem`,u=["rgb(205,193,180)","rgb(238,228,218)","rgb(237,224,200)","rgb(242,177,121)","rgb(245,149,99)","rgb(246,124,96)","rgb(246,94,59)","rgb(237,207,115)","rgb(237,204,98)","rgb(237,200,80)","rgb(237,197,63)","rgb(237,194,45)"];return s("div",{style:{backgroundColor:u[0]},children:s("div",{className:"w-24 h-24 bg-neutral-800 flex items-center justify-center font-bold",style:{backgroundColor:u[c]||"black",color:c<=2?"rgb(119,110,101)":"white",transform:h,transitionDuration:h===""?void 0:"0.1s",fontSize:p()},children:c===0?"":Math.pow(2,c)})})},M=()=>{const[p,u]=m.useState(!1),[w,b]=m.useState(0),[g,v]=m.useState(0);m.useEffect(()=>{b(parseInt(localStorage.getItem("score"))||0),v(parseInt(localStorage.getItem("best"))||0),x(JSON.parse(localStorage.getItem("board"))||o)},[]);const N=()=>{for(let a of o)for(let n of a)if(n.value===0)return!1;return!0},z=()=>{const a=new Array(4).fill(0).map(()=>new Array(4).fill(0).map(()=>({value:0,transition:""})));return S(a),S(a),a},A=a=>{if(p)return;const n=[...o],i=[];switch(a.code){case"KeyA":case"ArrowLeft":for(let t=0;t<4;t++){let r=0,l=0;for(let e=0;e<4;e++)o[t][e].value!==0&&(o[t][e].value===l?(r--,l=0):l=o[t][e].value,i.push({row:t,col:e,drow:t,dcol:r}),n[t][e].transition=`translateX(${-1*(e-r)*108}px)`,r++)}break;case"KeyD":case"ArrowRight":for(let t=0;t<4;t++){let r=3,l=0;for(let e=4-1;e>=0;e--)o[t][e].value!==0&&(o[t][e].value===l?(r++,l=0):l=o[t][e].value,i.push({row:t,col:e,drow:t,dcol:r}),n[t][e].transition=`translateX(${(r-e)*108}px)`,r--)}break;case"KeyW":case"ArrowUp":for(let t=0;t<4;t++){let r=0,l=0;for(let e=0;e<4;e++)o[e][t].value!==0&&(o[e][t].value===l?(r--,l=0):l=o[e][t].value,i.push({row:e,col:t,drow:r,dcol:t}),n[e][t].transition=`translateY(${-1*(e-r)*108}px)`,r++)}break;case"KeyS":case"ArrowDown":for(let t=0;t<4;t++){let r=3,l=0;for(let e=4-1;e>=0;e--)o[e][t].value!==0&&(o[e][t].value===l?(r++,l=0):l=o[e][t].value,i.push({row:e,col:t,drow:r,dcol:t}),n[e][t].transition=`translateY(${(r-e)*108}px)`,r--)}break;default:return}u(!0),x(n),setTimeout(()=>{const t=[...o];let r=!1,l=0;for(const e of i){if(e.row===e.drow&&e.col===e.dcol){t[e.row][e.col]={value:t[e.row][e.col].value,transition:""};continue}const f=t[e.row][e.col].value;f===t[e.drow][e.dcol].value&&(l+=Math.pow(2,f+1)),t[e.drow][e.dcol]={value:f===t[e.drow][e.dcol].value?f+1:f,transition:""},t[e.row][e.col]={value:0,transition:""},r=!0}y(w+l,t,r)},100)},y=(a,n,i)=>{b(a),v(Math.max(a,g)),x(n),u(!1),localStorage.setItem("score",a),localStorage.setItem("best",Math.max(a,g)),!N()&&(i&&(n=S([...o])),localStorage.setItem("board",JSON.stringify(n)))},S=a=>{do var n=Math.floor(Math.random()*4),i=Math.floor(Math.random()*4);while(a[n][i].value!==0);return a[n][i].value=Math.random()>.9?2:1,a},[o,x]=m.useState(z());return s("div",{className:"w-screen h-screen flex items-center justify-center",onKeyDown:A,tabIndex:"0",children:d("div",{className:"flex flex-col outline-none",children:[d("div",{className:"flex gap-2 justify-between items-center",children:[s("h1",{className:"text-8xl font-bold text-[#776E65] text-left h-min",children:"2048"}),d("div",{className:"flex flex-col items-end gap-2",children:[d("div",{className:"flex gap-2",children:[d("div",{className:"bg-[#BBADA0] px-5 rounded",children:[s("p",{className:"text-[#EEE4DA] font-bold text-xs mt-2 text-center",children:"SCORE"}),s("p",{className:"text-white font-bold text-2xl text-center",children:w})]}),d("div",{className:"bg-[#BBADA0] px-5 rounded",children:[s("p",{className:"text-[#EEE4DA] font-bold text-xs mt-2 text-center",children:"BEST"}),s("p",{className:"text-white font-bold text-2xl text-center",children:g})]})]}),s("button",{className:"p-1.5 bg-[#8F7A66] px-4 font-bold text-lg rounded text-white w-32 my-6",onClick:()=>{localStorage.removeItem("board"),localStorage.setItem("best",g),localStorage.setItem("score",0),x(z()),b(0)},children:"New Game"})]})]}),s("div",{className:"flex flex-col gap-3 bg-[#BBADA0] p-3 rounded-lg",children:o.map((a,n)=>s("div",{className:"flex gap-3",children:a.map((i,t)=>s(B,{value:i.value,transition:i.transition},t))},n))})]})})};function D(){return s("div",{className:"bg-[#FAF8EF] w-screen h-screen flex items-center justify-center",children:s(M,{})})}E.createRoot(document.getElementById("root")).render(s(I.StrictMode,{children:s(D,{})}));
