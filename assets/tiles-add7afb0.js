import{a,r as b,j as d,c as A,R as E}from"./index-552142d5.js";const B=({value:c,transition:p})=>{const w=()=>`${3.5-(Math.pow(2,c).toString().length-1)*.5}rem`,u=["rgb(205,193,180)","rgb(238,228,218)","rgb(237,224,200)","rgb(242,177,121)","rgb(245,149,99)","rgb(246,124,96)","rgb(246,94,59)","rgb(237,207,115)","rgb(237,204,98)","rgb(237,200,80)","rgb(237,197,63)","rgb(237,194,45)"];return a("div",{style:{backgroundColor:u[0]},children:a("div",{className:"w-24 h-24 bg-neutral-800 flex items-center justify-center font-bold",style:{backgroundColor:u[c]||"black",color:c<=2?"rgb(119,110,101)":"white",transform:p,transitionDuration:p===""?void 0:"0.1s",fontSize:w()},children:c===0?"":Math.pow(2,c)})})},M=()=>{const[w,u]=b.useState(!1),[m,x]=b.useState(0),[S,z]=b.useState(0);b.useState(!1);const N=()=>{for(let n of l)for(let i of n)if(i.value===0)return!1;return h(v()),x(0),!0},v=()=>{const n=new Array(4).fill(0).map(()=>new Array(4).fill(0).map(()=>({value:0,transition:""})));return g(n),g(n),n},y=n=>{if(w)return;const i=[...l],s=[];switch(n.code){case"KeyA":for(let t=0;t<4;t++){let r=0,o=0;for(let e=0;e<4;e++)l[t][e].value!==0&&(l[t][e].value===o?(r--,o=0):o=l[t][e].value,s.push({row:t,col:e,drow:t,dcol:r}),i[t][e].transition=`translateX(${-1*(e-r)*108}px)`,r++)}break;case"KeyD":for(let t=0;t<4;t++){let r=3,o=0;for(let e=4-1;e>=0;e--)l[t][e].value!==0&&(l[t][e].value===o?(r++,o=0):o=l[t][e].value,s.push({row:t,col:e,drow:t,dcol:r}),i[t][e].transition=`translateX(${(r-e)*108}px)`,r--)}break;case"KeyW":for(let t=0;t<4;t++){let r=0,o=0;for(let e=0;e<4;e++)l[e][t].value!==0&&(l[e][t].value===o?(r--,o=0):o=l[e][t].value,s.push({row:e,col:t,drow:r,dcol:t}),i[e][t].transition=`translateY(${-1*(e-r)*108}px)`,r++)}break;case"KeyS":for(let t=0;t<4;t++){let r=3,o=0;for(let e=4-1;e>=0;e--)l[e][t].value!==0&&(l[e][t].value===o?(r++,o=0):o=l[e][t].value,s.push({row:e,col:t,drow:r,dcol:t}),i[e][t].transition=`translateY(${(r-e)*108}px)`,r--)}break;default:return}u(!0),h(i),setTimeout(()=>{const t=[...l];let r=!1,o=0;for(const e of s){if(e.row===e.drow&&e.col===e.dcol){t[e.row][e.col]={value:t[e.row][e.col].value,transition:""};continue}const f=t[e.row][e.col].value;f===t[e.drow][e.dcol].value&&(o+=Math.pow(2,f+1)),t[e.drow][e.dcol]={value:f===t[e.drow][e.dcol].value?f+1:f,transition:""},t[e.row][e.col]={value:0,transition:""},r=!0}x(m+o),z(Math.max(m+o,S)),h(t),u(!1),!N()&&r&&g([...l])},100)},g=n=>{do var i=Math.floor(Math.random()*4),s=Math.floor(Math.random()*4);while(n[i][s].value!==0);return n[i][s].value=Math.random()>.9?2:1,n},[l,h]=b.useState(v());return a("div",{className:"w-screen h-screen flex items-center justify-center",onKeyDown:y,tabIndex:"0",children:d("div",{className:"flex flex-col outline-none",children:[d("div",{className:"flex gap-2 justify-between items-center",children:[a("h1",{className:"text-8xl font-bold text-[#776E65] text-left h-min",children:"2048"}),d("div",{className:"flex flex-col items-end gap-2",children:[d("div",{className:"flex gap-2",children:[d("div",{className:"bg-[#BBADA0] px-5 rounded",children:[a("p",{className:"text-[#EEE4DA] font-bold text-xs mt-2 text-center",children:"SCORE"}),a("p",{className:"text-white font-bold text-2xl text-center",children:m})]}),d("div",{className:"bg-[#BBADA0] px-5 rounded",children:[a("p",{className:"text-[#EEE4DA] font-bold text-xs mt-2 text-center",children:"BEST"}),a("p",{className:"text-white font-bold text-2xl text-center",children:S})]})]}),a("button",{className:"p-1.5 bg-[#8F7A66] px-4 font-bold text-lg rounded text-white w-32 my-6",onClick:()=>{h(v()),x(0)},children:"New Game"})]})]}),a("div",{className:"flex flex-col gap-3 bg-[#BBADA0] p-3 rounded-lg",children:l.map((n,i)=>a("div",{className:"flex gap-3",children:n.map((s,t)=>a(B,{value:s.value,transition:s.transition},t))},i))})]})})};function k(){return a("div",{className:"bg-[#FAF8EF] w-screen h-screen flex items-center justify-center",children:a(M,{})})}A.createRoot(document.getElementById("root")).render(a(E.StrictMode,{children:a(k,{})}));
